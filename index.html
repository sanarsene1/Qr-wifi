<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QR-Fi Scanner | Connexion 100% Facile</title>
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/jsqr@1.1.0/dist/jsQR.min.js"></script>
  
  <style>
    /* VARIABLES CSS - Palette de Couleurs Galactique */
    :root {
      --primary-galaxy-blue: #0A192F; 
      --secondary-galaxy-purple: #8B5CF6; 
      --accent-galaxy-cyan: #22D3EE; 
      --text-light: #E2E8F0; 
      --card-background: #1A273D; 
      --gradient-start: #0F1D36;
      --gradient-end: #1A2A40;
      --font-family-sans: 'Montserrat', sans-serif; 
      --glow-color: rgba(34, 211, 238, 0.7); 
    }

    /* Importer une police Google Fonts */
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap');

    body {
      font-family: var(--font-family-sans);
      background: linear-gradient(135deg, var(--gradient-start) 0%, var(--gradient-end) 100%);
      background-size: 400% 400%; 
      animation: gradientBackground 15s ease infinite; 
      color: var(--text-light);
      margin: 0;
      padding: 0;
      line-height: 1.8; 
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    @keyframes gradientBackground {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* Effet "étoiles" */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNzAwIiBoZWlnaHQ9IjcwMCIgdmlld0JveD0iMCAwIDcwMCA3MDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8ZGVmcz4KICAgICAgPHJhZGlhbEdyYWRpZW50IGlkPSJhIiBjeD0iNTAuMDA2JSIgY3k9IjUwJSIgcj0iNTAuMDA2JSI+CiAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0ZGRiIgb2Zmc2V0PSIwJSIvPgogICAgICAgIDxzdG9wIHN0b3AtY29sb3JPSCIjRkZGRkZGIiBzdG9wLW9wYWNpdHk9IjAiIG9mZnNldD0iMTAwJSIvPgogICAgICA8L3JhZGlhbEdyYWRpZW50PgogICAgPC9kZWZzPgogICAgPGNpcmNsZSBjeD0iMCIgY3k9IjAiIHI9IjIyNSIgZmlsbD0idXJsKCNhKSIgb3BhY2l0eT0iMC4wNCIvPgogICAgPGNpcmNsZSBjeD0iNzAwIiBjeT0iNzAwIiByPSIyMjUiIGZpbGw9InVybCgkYykiIG9wYWNpdHk9IjAuMDQiLz4KICAgIDxjaXJjbGUgY3g9IjcwMCIgY3k9IjAiIHI9IjIyNSIgZmlsbD0idXJsKCNhKSIgb3BhY2l0eT0iMC4wNCIvPgogICAgPGNpcmNsZSBjeD0iMCIgY3k9IjcwMCIgci4uMjI1IiBmaWxsPSJ1cmwoI2EpIiBvcGFjaXR5PSIwLjA0Ii8+Cjwvc3ZnPg==') no-repeat center center / cover;
      opacity: 0.1; 
      z-index: -1; 
      animation: twinkle 60s linear infinite; 
    }

    @keyframes twinkle {
        from { transform: translate(0, 0); }
        to { transform: translate(-100px, -100px); } 
    }

    /* HEADER */
    header {
      background-color: var(--primary-galaxy-blue);
      color: var(--text-light);
      padding: 20px 0;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
      text-align: center;
      position: relative;
      z-index: 10;
    }

    header h1 {
        margin: 0;
        font-size: 2.2em;
        font-weight: 700;
        letter-spacing: 1.5px;
        text-shadow: 0 0 10px var(--glow-color); 
    }
    
    header h1 i {
        color: var(--accent-galaxy-cyan);
        margin-right: 10px;
    }

    /* CONTENEUR PRINCIPAL */
    #main-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 60px 20px;
      flex-grow: 1; 
      gap: 40px; 
    }

    /* CARD STYLE */
    .card {
      width: 100%;
      max-width: 550px;
      padding: 40px;
      background-color: var(--card-background);
      border-radius: 20px; 
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4), 0 0 20px var(--glow-color) inset; 
      text-align: center;
      animation: fadeInFromTop 0.8s ease-out; 
      border: 1px solid var(--accent-galaxy-cyan); 
    }

    @keyframes fadeInFromTop {
      from { transform: translateY(-30px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    
    .card h2 {
        color: var(--accent-galaxy-cyan);
        margin-top: 0;
        font-size: 1.8em;
        text-shadow: 0 0 8px rgba(34, 211, 238, 0.5);
    }
    
    .card p {
        color: var(--text-light);
        font-size: 1.1em;
        opacity: 0.9;
    }

    /* INPUT FILE AND BUTTON */
    #qr-form {
      display: flex;
      flex-direction: column;
      gap: 20px;
      margin-top: 30px;
    }

    #qr-code {
      padding: 15px;
      border: 2px solid var(--secondary-galaxy-purple); 
      border-radius: 10px;
      background-color: var(--primary-galaxy-blue);
      color: var(--text-light);
      font-size: 1em;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    #qr-code::-webkit-file-upload-button {
        background-color: var(--secondary-galaxy-purple);
        color: var(--text-light);
        border: none;
        padding: 10px 20px;
        border-radius: 8px;
        cursor: pointer;
        transition: background-color 0.3s;
    }

    #submit-btn {
      padding: 15px 30px;
      background: linear-gradient(45deg, var(--secondary-galaxy-purple), var(--accent-galaxy-cyan)); 
      color: var(--primary-galaxy-blue); 
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-size: 1.2em;
      font-weight: 600;
      transition: all 0.3s ease;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      position: relative;
      overflow: hidden; 
    }

    #submit-btn:hover {
      transform: translateY(-5px) scale(1.02);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.5), 0 0 30px var(--accent-galaxy-cyan);
    }
    
    #submit-btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: rgba(255, 255, 255, 0.2);
        transform: skewX(-30deg);
        transition: 0.7s;
    }

    #submit-btn:hover::before {
        left: 100%;
    }

    /* RÉSULTAT DU DÉCODAGE */
    #result {
      margin-top: 30px;
      padding: 20px;
      font-size: 1.1em;
      border-radius: 10px;
      background-color: var(--card-background);
      border: 1px solid var(--secondary-galaxy-purple);
      color: var(--text-light);
      text-align: left; /* Très important pour l'affichage ligne par ligne */
      box-shadow: 0 0 15px rgba(139, 92, 246, 0.3);
      white-space: pre-wrap; /* Pour respecter les sauts de ligne créés dans le JS */
    }

    /* SECTION DE MOTIVATION */
    .section-motivation {
        background: linear-gradient(90deg, var(--primary-galaxy-blue) 0%, rgba(139, 92, 246, 0.2) 50%, var(--primary-galaxy-blue) 100%);
        padding: 50px 30px;
        text-align: center;
        border-radius: 20px;
        max-width: 900px;
        width: 100%;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        border: 1px solid var(--secondary-galaxy-purple);
    }

    .section-motivation h3 {
        color: var(--accent-galaxy-cyan);
        font-size: 2em;
        margin-bottom: 25px;
        text-shadow: 0 0 10px rgba(34, 211, 238, 0.6);
    }
    
    .section-motivation p {
        font-size: 1.4em;
        font-weight: 600; /* Plus impactant */
        color: var(--text-light);
        max-width: 700px;
        margin: 0 auto;
        line-height: 1.5;
    }

    /* BLOCS D'INFORMATIONS */
    .section-details {
        display: flex;
        justify-content: center; 
        gap: 30px;
        flex-wrap: wrap;
        max-width: 1000px;
        width: 100%;
    }

    .info-block {
        flex: 1;
        min-width: 300px; 
        max-width: 45%;
        padding: 30px;
        background-color: var(--card-background);
        border-radius: 15px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        border: 1px solid var(--secondary-galaxy-purple);
        text-align: left;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .info-block:hover {
        transform: translateY(-8px);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4), 0 0 25px rgba(139, 92, 246, 0.5);
    }

    .info-block h3 {
        color: var(--accent-galaxy-cyan);
        font-size: 1.6em;
        margin-bottom: 15px;
    }

    .info-block i {
        color: var(--secondary-galaxy-purple);
        font-size: 1.8em;
        margin-right: 15px;
    }
    
    .info-block a {
        color: var(--accent-galaxy-cyan);
        text-decoration: none;
    }

    /* FOOTER */
    footer {
      background-color: var(--primary-galaxy-blue);
      color: var(--text-light);
      padding: 30px 20px;
      text-align: center;
      box-shadow: 0 -4px 15px rgba(0, 0, 0, 0.3);
      margin-top: auto; 
    }

    .footer-links {
        margin-top: 20px;
        margin-bottom: 20px;
    }

    footer a {
      color: var(--accent-galaxy-cyan);
      text-decoration: none;
      margin: 0 20px;
      transition: color 0.3s;
      font-weight: 600;
    }

    footer a:hover {
      color: var(--secondary-galaxy-purple);
    }

    .social-icons {
        margin-top: 20px;
    }

    .social-icons a {
        font-size: 2em;
        margin: 0 15px;
        color: var(--secondary-galaxy-purple);
        transition: color 0.3s, transform 0.3s;
    }

    .social-icons a:hover {
        color: var(--accent-galaxy-cyan);
        transform: translateY(-5px) scale(1.1);
    }

    .developer-info {
        font-size: 1em;
        margin-top: 25px;
        color: var(--text-light);
        opacity: 0.7;
    }

    /* RESPONSIVE DESIGN */
    @media (max-width: 768px) {
        /* ... (styles responsives) ... */
    }
  </style>
</head>

<body>
  <header>
    <h1><i class="fas fa-satellite-dish"></i> QR-Fi Scanner</h1>
  </header>

  <div id="main-container">
    
    <div class="card">
      <h2>Zéro Erreur. Connexion Immédiate.</h2>
      <p>Marre des fautes de frappe ? Scannez le code QR de votre Wi-Fi et obtenez le Nom du réseau et le Mot de passe, clairs et sans effort.</p>
      
      <form id="qr-form">
        <input type="file" id="qr-code" accept="image/*" required>
        <button id="submit-btn" type="submit"><i class="fas fa-rocket"></i> Scanner et Révéler les Infos</button>
      </form>
      
      <div id="result">Prêt à décoder votre Wi-Fi...</div>
    </div>
    
    <div class="section-motivation">
        <h3>Gagnez du Temps, Évitez les Frustrations.</h3>
        <p>
            "Oubliez la recherche du mot de passe derrière le routeur. Notre scanner est la solution la plus simple pour partager ou se connecter. C'est rapide, c'est clair, c'est pour vous."
        </p>
    </div>

    <div class="section-details">
        <div class="info-block">
            <h3><i class="fas fa-check-circle"></i> Simple et Fiable</h3>
            <p>Conçu pour être utilisé par tout le monde. Téléchargez l'image du code QR et le résultat s'affiche instantanément, sans jargon technique. La simplicité au service de l'efficacité.</p>
        </div>
        
        <div class="info-block">
            <h3><i class="fas fa-headset"></i> Notre Support</h3>
            <p>Une question ? Nous sommes là pour vous. Écrivez-nous directement pour toute aide ou suggestion. Votre satisfaction est notre priorité.</p>
            <p><i class="fas fa-envelope"></i> <a href="mailto:muviriarsene@ucbc.edu.cd">muviriarsene@ucbc.edu.cd</a></p>
        </div>
    </div>
    
  </div>

  <footer>
    <p>&copy; 2025 QR-Fi Scanner. Tous droits réservés.</p>
    
    <div class="footer-links">
        <a href="#main-container">Accueil</a> |
        <a href="mailto:muviriarsene@ucbc.edu.cd">Contact</a>
    </div>
    
    <div class="social-icons">
      <a href="https://www.facebook.com/san.arsene.2025" target="_blank" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
      <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
      <a href="#" aria-label="GitHub"><i class="fab fa-github"></i></a>
    </div>

    <p class="developer-info">
         **San Arsène**
    </p>

  </footer>

  <script>
    const qrForm = document.getElementById('qr-form');
    const qrCodeInput = document.getElementById('qr-code');
    const resultDiv = document.getElementById('result');

    /**
     * Analyse la chaîne de données d'un QR code Wi-Fi et la formate clairement.
     * Exemple de chaîne : WIFI:S:MonWifi;T:WPA;P:MotDePasseSecret;;
     * @param {string} data La chaîne de données décodée.
     * @returns {string} Le texte formaté pour l'affichage.
     */
    function formatWifiData(data) {
      // 1. Vérifie si c'est bien un code Wi-Fi (commence par "WIFI:")
      if (!data.startsWith('WIFI:')) {
        return `Code décodé : ${data}\n\n(Ce n'est pas un format Wi-Fi standard, il peut s'agir d'un site web ou autre)`;
      }

      // 2. Extrait les paires clé:valeur (S, T, P)
      // Enlève "WIFI:" au début et ";;" à la fin, puis splitte par point-virgule.
      const parts = data.substring(5).slice(0, -2).split(';');
      
      const details = {};
      parts.forEach(part => {
        if (part) {
          const key = part.substring(0, 1);
          const value = part.substring(2);
          details[key] = value;
        }
      });
      
      // 3. Formate les résultats en toute lettre, un par ligne
      let output = "✅ Informations Wi-Fi décodées :\n\n";

      // Nom du Réseau (SSID)
      const ssid = details['S'] || 'Non spécifié';
      output += `Nom du Wi-Fi (SSID) : ${ssid}\n`;

      // Type de Sécurité (T)
      const encryption = details['T'] || 'Non spécifié';
      let encryptionLabel = 'Mode de Sécurité';
      if (encryption === 'WPA' || encryption === 'WPA2' || encryption === 'WPA/WPA2') {
          encryptionLabel = 'Mode de Sécurité (WPA/WPA2)';
      } else if (encryption === 'WEP') {
          encryptionLabel = 'Mode de Sécurité (WEP - Faible)';
      } else if (encryption === 'nopass') {
          encryptionLabel = 'Mode de Sécurité (Ouvert)';
      }
      output += `${encryptionLabel} : ${encryption}\n`;

      // Mot de Passe (P)
      const password = details['P'] || 'Aucun mot de passe (Réseau Ouvert)';
      output += `Mot de Passe : ${password}\n`;

      // Le retour à la ligne '\n' et le `white-space: pre-wrap;` dans le CSS
      // garantissent que chaque élément s'affiche sur sa propre ligne.
      return output;
    }


    qrForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const file = qrCodeInput.files[0];
      
      if (!file) {
        resultDiv.innerText = 'Veuillez sélectionner un fichier image pour lancer le scan.';
        return;
      }
      
      const reader = new FileReader();
      reader.onload = (event) => {
        const img = new Image();
        img.onload = () => {
          const canvas = document.createElement('canvas');
          canvas.width = img.width;
          canvas.height = img.height;
          const ctx = canvas.getContext('2d');
          ctx.drawImage(img, 0, 0);
          
          if (typeof jsQR === 'function') {
              const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
              const code = jsQR(imageData.data, imageData.width, imageData.height);
              
              if (code) {
                // APPEL À LA NOUVELLE FONCTION DE FORMATAGE
                resultDiv.innerText = formatWifiData(code.data);
              } else {
                resultDiv.innerText = '❌ Aucun code QR détecté. Assurez-vous que l\'image est claire.';
              }
          } else {
             resultDiv.innerText = '⚠️ Erreur technique: La librairie jsQR est manquante. Vérifiez la connexion internet ou l\'inclusion du script.';
          }
        };
        img.src = event.target.result;
      };
      reader.readAsDataURL(file);
    });
  </script>
</body>
  </html>
